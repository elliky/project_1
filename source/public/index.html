<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Note App</title>
    <link rel="icon" type="image/svg" href="./resources/note.svg" />
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.7.7/handlebars.min.js"
      defer
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/luxon/3.4.4/luxon.min.js"
      defer
    ></script>
    <!-- <script src="handlebars.min.js"></script> -->
    <link rel="stylesheet" href="styles/main.css" />
    <script
      src="scripts/controller/todo-controller.js"
      type="module"
      defer
    ></script>
    <!-- <script src="scripts/todoService.js" defer></script> -->
  </head>
  <body>
    <h1>Note App</h1>
    <div>
      <button type="button" name="create_new" id="create_new">
        Create new Todo
      </button>
      <button type="button" name="toggle_style" id="toggle_style">
        Toggle Style
      </button>
    </div>
    <div>
      <div>
        <input type="button" name="name" id="name" value="Name" />
        <button name="due-Date" id="due-Date" value="By Due Date">
          By Due Date
        </button>
        <button type="button" name="creation-date" id="creation-date">
          By Creation Date
        </button>
        <button type="button" name="importance" id="importance">
          By Importance
        </button>
      </div>
      <input type="button" name="filter" id="filter" value="Creat new Todo" />
    </div>
    <h2>Table</h2>
    <section class="card" id="todo-notes-buttons"></section>
    <section class="card" id="todo-notes-container"></section>
    <section class="card" id="edit-todo-note-container"></section>

    <!-- Note List -->
    <script id="todo-notes-template" type="text/x-handlebars-template">
      <div id="sort-buttons">
      <!-- if is theoretically not necessary, but still ok for the case when sortOptions are moved to backend -->
      {{#if displayedSortButton.length}}
        {{#each displayedSortButton}}
        <button name="{{this}}" data-sort-attribute="{{this}}" id="{{this}}" value="By {{this}}">
          By {{this}}
        </button>
        {{/each}}
      {{else}}
          No sort options found!
      {{/if}}
      </div>

      {{#if displayedTodoNotes.length}}
        <ul class="todo-table">
          test output
          {{#each displayedTodoNotes}}
          <li class="table-entry">
            <span>{{title}}</span>
            <div>
              <div>{{hbFormatDate dueDate}}</div>
              <div id="todo-notes-finished-button">
                <input type="checkbox" data-todo-note-id="{{id}}" name="finished" {{#if finished}}checked{{/if}} />
              </div>
            </div>
            <div>
              <div>{{name}}</div>
              <div>{{description}}</div>
            </div>
            <div>
              <div>{{importance}}</div>
              <button name="edit" data-todo-note-id={{id}}>Edit</button>
            </div>
          </li>
          {{/each}}
        </ul>
      {{else}}
      <div>No items to show!</div>
      {{/if}}
    </script>

    <!-- Edit Note -->
    <script id="edit-note-template" type="text/x-handlebars-template">
      <h1>ToDo App</h1>
      {{#if todoNote}}
      <h2>Edit ToDo</h2>
      {{else}}
      <h2>Add new ToDo</h2>
      {{/if}}

      <form id="form" onsubmit="return false;">
        <input id="id" type="text" name="id" value="{{todoNote.id}}" hidden />

        <label for="title">Title</label>
        <input id="title" type="text" name="title" required value="{{todoNote.title}}" />

        <br />

        <label for="importance">Importance</label>
        <input name="importance" type="range" min="1" max="5" id="importance" value="{{todoNote.importance}}" />

        <br />

        <label for="dueDate">Duedate</label>
        <input id="dueDate" type="date" name="dueDate" value="{{todoNote.dueDate}}"/>

        <br />

        <label for="finished">Finished</label>
        <input type="checkbox" id="finished" name="finished" {{#if todoNote.finished}}checked{{/if}} />

        <br />

        <label for="description">Description</label>
        <textarea id="description" name="description">{{todoNote.description}}</textarea>

        <br />

        <button name="saveTodoNote">Save</button>
        <button name="saveTodoNoteOverview">Save & Overview</button>
      </form>
    </script>
  </body>
</html>
